# **Um framework de rastreamento corporal para reabilita√ß√£o** **neuromotora com suporte a aplicativos multim√≠dia**

## Marcelo Guimar√£es
#### marcelo.paiva@unifesp.br Universidade Federal de S√£o Paulo (UNIFESP) Osasco, SP, Brasil
## Diego Dias
#### diego.dias@ufes.br Universidade Federal do Esp√≠rito Santo (UFES) Vit√≥ria, ES, Brasil

## Elvis Ribeiro
#### elvishribeiro@gmail.com Universidade Federal de S√£o Jo√£o del-Rei (UFSJ) S√£o Jo√£o del-Rei, MG, Brasil
## Leonardo Rocha
#### lcrocha@ufsj.edu.br Universidade Federal de S√£o Jo√£o del-Rei (UFSJ) S√£o Jo√£o del-Rei, MG, Brasil
### ABSTRACT

## Alexandre Brand√£o
#### alexandre.brandao@puc- campinas.edu.br Universidade Pontif√≠cia Cat√≥lica de Campinas (PUC-Campinas) Campinas, SP, Brasil
## Jos√© Remo Brega
#### remo.brega@unesp.br Universidade Estadual Paulista (UNESP) Bauru, SP, Brasil


Multimedia applications and games play a crucial role
in rehabilitation and health, providing an interactive and
engaging approach that can improve patient motivation,
facilitate progress monitoring, and personalize treatment
plans. They offer an innovative physical and cognitive therapy platform, allowing healthcare professionals to explore
new forms of treatment and patients to experience a more
enjoyable and effective recovery. Despite recent advances
in hardware and software, integrated solutions still need
to be developed to facilitate the development of new applications, especially those that use body-tracking sensors.
This paper presents the framework for a development solution that simplifies the creation of new natural user interface (NUI) applications based on inertial sensors, supporting
both tracking and the creation of sessions and data storage. We also present examples of applications developed
to show the potential of the solution for developing new
applications that use the user‚Äôs own body as a means of

interaction.
### KEYWORDS

Realidade Virtual, Jogos S√©rios, Multim√≠dia, Reabilita√ß√£o
Neuromotora, Sensores, Rastreamento Corporal, Desenvolvimento de Software
### 1 INTRODU√á√ÉO

As aplica√ß√µes multim√≠dia e jogos s√£o ferramentas de extrema import√¢ncia na sa√∫de e reabilita√ß√£o motora. Elas oferecem uma abordagem l√∫dica e interativa para diversos tipos
de tratamento, aumentando a motiva√ß√£o do paciente e promovendo o engajamento em diversos tipos de tratamento.
Al√©m disso, permitem o monitoramento preciso do progresso

In: Proceedings of the Brazilian Symposium on Multimedia and the
Web (WebMedia‚Äô2024). Juiz de Fora, Brazil. Porto Alegre: Brazilian

Computer Society, 2024.
¬© 2024 SBC ‚Äì Brazilian Computing Society.
ISSN 2966-2753


do paciente e personaliza√ß√£o do plano de tratamento. No contexto de reabilita√ß√£o neuromotora, por exemplo, ao tornar
o processo de reabilita√ß√£o mais agrad√°vel e envolvente, essas tecnologias podem contribuir significativamente para a
recupera√ß√£o do paciente [10].
Com o avan√ßar da idade o homem desenvolve doen√ßas que
poderiam ser controladas pela pr√°tica regular de atividades
f√≠sicas, como a sarcopenia, osteoporose, obesidade e cardiopatias. O atual cen√°rio de inatividade f√≠sica [ 6, 9 ] est√° associado
a problemas de sa√∫de p√∫blica e aumento de doen√ßas n√£otransmiss√≠veis (aterosclerose, diabetes tipo 2 e carcinomas),
considerando a cultura e o estilo de vida como estrat√©gias
de preven√ß√£o e promo√ß√£o de sa√∫de. Neste cen√°rio, busca-se
atividades que envolvam grandes grupos musculares, como
os m√∫sculos dos membros inferiores, para promover uma intensa circula√ß√£o sangu√≠nea e um aumento consequente no
gasto energ√©tico durante a realiza√ß√£o dessas atividades. Por
exemplo, movimentos corporais que simulem a caminhada
possuem caracter√≠sticas que contemplam estas exig√™ncias.
Contrariando a antiga cren√ßa de que o c√©rebro humano √©
imut√°vel, Kesselring [7] aponta que devido √† neuroplasticidade do c√©rebro, o sistema nervoso central do ser humano
adulto tem uma excelente capacidade de recupera√ß√£o espont√¢nea. Ademais, os exerc√≠cios terap√™uticos influenciam positivamente na recupera√ß√£o, acelerando e fortalecendo-a. Desta
forma, o emprego de aplica√ß√µes multim√≠dia, principalmente
jogos s√©rios, pode ser empregado como ferramenta auxiliar
em diversos cen√°rios de reabilita√ß√£o, entre eles a reabilita√ß√£o
da capacidade neuromotora de pacientes acometidos por um
Acidente Vascular Cerebral (AVC), ou como incentivo na
reabilita√ß√£o de pacientes que apresentam dificuldades na
movimenta√ß√£o de membros inferiores.
A busca de novas modalidades de entretenimento, que
atendam requisitos necess√°rios ao aumento significativo de
atividade f√≠sica, s√£o de grande interesse social, melhor aceito
pela popula√ß√£o quando inserida de forma l√∫dica e apresentada em ambientes interativos e imersivos de RV. Maloney
et al . [8] indicam que os jogos interativos digitais s√£o potencialmente ben√©ficos ao aumento da realiza√ß√£o de atividades


292


-----

WebMedia‚Äô2024, Juiz de Fora, Brazil Ribeiro et al.


f√≠sicas na popula√ß√£o infantil. Como mostrado por Guimaraes
et al . [5], o cansa√ßo f√≠sico √© um fator limitante ao tempo de
intera√ß√£o do usu√°rio com tecnologias virtuais baseada em
gestos, evidenciando que um maior grau de fortalecimento
da musculatura do corpo poderia colaborar com o aumento
de tempo de intera√ß√£o dos usu√°rios com as iminentes tecnologias suportadas por gestos corporais, tais como o controle de
televisores inteligentes por meio de movimentos com as m√£os,
sendo assim um movimento natural ao cotidiano do usu√°rio.

As aplica√ß√µes de multim√≠dia v√™m desempenhando um papel
importante nos dias atuais e est√£o presente nas mais diversas
√°reas, incluindo como ferramenta no aux√≠lio de reabilita√ß√£o

[ 1, 3, 15 ]. A intera√ß√£o √© parte essencial do engajamento do
usu√°rio com o ambiente virtual, podendo ser alcan√ßada por
meio de controles, toques ou at√© mesmo gestos. A solu√ß√£o
apresentada no trabalho utiliza-se da intera√ß√£o natural do
usu√°rio (NUI), sendo estes captados por meio de sensores
inerciais embarcados. A intera√ß√£o entre o usu√°rio e o sistema
deve ser, idealmente, o mais natural poss√≠vel. Em sistemas
de realidade virtual (RV), por exemplo, em que a imers√£o
impossibilita o uso de teclados, mouses e telas sens√≠veis ao
toque, a intera√ß√£o √© realizada por meio de solu√ß√µes espec√≠ficas como *joysticks*, gestos e voz. Em casos onde o usu√°rio √©
incapaz de operar um *joystick*, ou quando se deseja estimular
a movimenta√ß√£o corporal, a intera√ß√£o por meios de gestos
corporais se mostra uma excelente escolha.
Tecnologias de rastreamento corporal v√™m sendo utilizadas
largamente na ind√∫stria de jogos [ 4 ]. Dispositivos de rastreamento √≥ticos, tal como o *Kinect* da Microsoft ou solu√ß√µes
*Mocap* [1], utilizam vis√£o computacional para rastrear o corpo
humano [ 14 ]. Por√©m, o uso do Kinect apresenta limita√ß√µes
como liberdade, precis√£o e oclus√£o, o que limita o movimento
do usu√°rio ao campo de vis√£o do dispositivo e impossibilita a
captura de movimentos do usu√°rio em posi√ß√£o lateral (se utilizado apenas um dispositivo). Tais problemas s√£o mitigados
quando empregadas as solu√ß√µes *Mocap*, visto que utilizam
m√∫ltiplas c√¢meras de captura e diversos marcadores anexados ao corpo do usu√°rio, por√©m o pre√ßo elevado √© um fator
obstante na escolha de uma solu√ß√£o boa e razoavelmente
barata. Neste trabalho, utilizamos o *biomechanical sensor*
*node* (BSN) como dispositivo de intera√ß√£o.
O BSN [ 2 ] √© um dispositivo de rastreamento corporal inovador desenvolvido por Brand√£o e sua equipe. Ele utiliza uma
rede de sensores colocados estrategicamente no corpo para
capturar movimentos e posturas em tempo real, permitindo
que o usu√°rio possa controlar ambientes virtuais por meio da
NUI. Esses dados s√£o ent√£o processados e utilizados para criar
uma representa√ß√£o digital precisa do usu√°rio. O BSN tem
aplica√ß√µes potenciais em uma variedade de campos, incluindo
reabilita√ß√£o f√≠sica, esportes e entretenimento interativo. Sua
precis√£o e facilidade de uso o tornam uma ferramenta valiosa
para profissionais e pesquisadores dessas √°reas.
A principal justificativa desse trabalho est√° relacionada a
dificuldade em se simular a intera√ß√£o do usu√°rio dentro de

1 Rastreamento corporal atrav√©s de marcadores presos ao corpo do
usu√°rio e diversas c√¢meras de alta defini√ß√£o circundando o ambiente.


um ambiente virtual de maneira intuitiva e imersiva. Outro

benef√≠cio, no que tange o uso de ambientes virtuais, √© a possibilidade do usu√°rio realizar o treinamento em um ambiente

controlado e seguro, visto que o ambiente virtual n√£o gera
perigo real, quando comparado a um ambiente real de treinamento. Portanto, pesquisas voltadas a meios de intera√ß√£o
de ambientes virtuais s√£o importantes ao desenvolvimento e
difus√£o de novas aplica√ß√µes.
Apresentamos neste trabalho a defini√ß√£o do framework de
rastreamento corporal, que possibilita a cria√ß√£o de aplica√ß√µes
de NUI utilizando o dispositivo BSN, assim como a cria√ß√£o e
armazenamento de sess√µes de fisioterapia, contexto apresentado como exemplo para a cria√ß√£o de aplica√ß√µes voltadas √†
reabilita√ß√£o neuromotora. Outras aplica√ß√µes exemplo tamb√©m
s√£o apresentadas.
### 2 METODOLOGIA

Desenvolver um framework envolve uma s√©rie de etapas
metodol√≥gicas. Primeiro, √© necess√°rio identificar e entender
claramente o problema ou a necessidade que o framework se
prop√µe a resolver. Em seguida, √© importante realizar uma
an√°lise aprofundada do dom√≠nio do problema para identificar
padr√µes comuns e abstra√ß√µes. Com base nessa an√°lise, o pr√≥ximo passo √© projetar a arquitetura do framework, definindo
suas principais classes e interfaces, bem como suas intera√ß√µes.
A implementa√ß√£o do framework deve ser feita de forma modular e extens√≠vel, permitindo que os desenvolvedores personalizem e estendam sua funcionalidade conforme necess√°rio.
Por fim, √© crucial fornecer documenta√ß√£o detalhada e exemplos de uso para ajudar os desenvolvedores a entender e
utilizar o framework efetivamente. √â importante notar que o
desenvolvimento de um framework √© um processo iterativo
que requer refinamento e evolu√ß√£o cont√≠nuos com base no
feedback dos usu√°rios e nas mudan√ßas nas necessidades do
dom√≠nio.

O primeiro passo foi levantar quais requisitos comuns
as aplica√ß√µes beneficiadas pelo uso do framework possuem.
Foram levantados alguns requisitos funcionais, tais como:
conex√£o de m√∫ltiplos BSNs ‚Äì a possibilidade de sincronizar
v√°rios BSNs para controlar diferentes partes do corpo humano; interface de f√°cil utiliza√ß√£o ‚Äì uma interface intuitiva,
que permita a descoberta e conex√£o dos dispositivos BSN; e
configura√ß√£o remota ‚Äì a possibilidade de realizar a configura√ß√£o a partir de outro dispositivo ( *smartphone* ou *desktop* ).
Adotamos a arquitetura Modelo-Vis√£o-Controle (MVC) e
seguimos o paradigma orientado a eventos. O MVC √© um
padr√£o de design amplamente utilizado na programa√ß√£o de
software que separa os componentes de um sistema em tr√™s
partes distintas. Dessa forma, o asset fica completamente
encapsulado, deixando toda a parte de configura√ß√£o dos BSN
transparente para o programador/usu√°rio.
### 2.1 Modelo

O Modelo √© o m√≥dulo respons√°vel por fazer a ger√™ncia
dos dispositivos BSN, a coleta de dados e a rota√ß√£o dos


293


-----

Um framework de rastreamento corporal para reabilita√ß√£o neuromotora com suporte a aplicativos multim√≠dia WebMedia‚Äô2024, Juiz de Fora, Brazil


objetos virtuais. √â composto pela API [2] de *BLE* BluetoothHardwareInterface, pela classe BSNHardwareInterface. Ela
n√£o armazena os dados do BSN, mas sim uma lista de uma
nova classe, a classe BSNDevice, que abstrai um dispositivo
BSN e a RotatableObject, que √© a classe que de fato est√°
dispon√≠vel para ser usada pelo programador.
A classe BSNHardwareInterface √© respons√°vel apenas por
realizar a comunica√ß√£o com o BluetoothHardwareInterface e
por armazenar uma lista de BSNDevices. Ap√≥s receber o comando FindBSN, por meio da ConfigurationAPI, √© iniciado o
processo de descoberta. Sempre que um *beacon* [3] √© encontrado,
a BSNHardwareInterface recebe uma resposta contendo o
nome e o endere√ßo MAC do dispositivo, em seguida adicionao √† lista de BSNs e envia uma resposta √† ConfigurationAPI,
informando que o dispositivo foi encontrado. Esse processo
√© ass√≠ncrono e sempre √© executado ao encontrar um novo
*beacon*, toda a comunica√ß√£o sendo feita por meio de *callbacks* .
O procedimento de conex√£o de um BSN √© an√°logo ao
de descoberta. A ConfigurationAPI envia o comando de
conex√£o, passando como par√¢metro o endere√ßo do dispositivo
que deseja conectar. Esse comando de conex√£o √© repassado
at√© o dispositivo BLE, que eventualmente responde o sucesso
de conex√£o informando todos os servi√ßos e caracter√≠sticas
dispon√≠veis. Nesse momento o objeto *BSNDevice* cadastra
seus *delegates* para receberem os dados sempre que forem
atualizados no BSN.

A classe BSNDevice representa um BSN na aplica√ß√£o,
contendo seu nome, endere√ßo e um campo booleano que
indica se est√° conectada. Ela conta tamb√©m com um objeto
da classe RotatableObject, respons√°vel por manipular objetos
3D no Unity [4], possuindo m√©todos que de fato lidam com os
dados do BSN. Portanto, a BSNDevice n√£o lida com os dados
propriamente dito, apenas os repassa √† RotatableObject.
Sendo assim, √© poss√≠vel intercambiar o objeto controlado por
um BSN em tempo de execu√ß√£o.
A classe RotatableObject oferece os m√©todos que recebem
dados que s√£o chamados pela BSNDevice a cada *notify* [5] do
BSN, a acelera√ß√£o linear, dados brutos e vetor de gravidade,
sendo eles LinearAccHandler(Vector3 linAcc), RawDataHandler(Vector3 accelerometer, Vector3 gyroscope, Vector3 compass) e GravityVectorHandler(Vector3 gravityVector), respectivamente. Esses m√©todos n√£o s√£o implementados e devem
ser implementados pelo usu√°rio programador. O m√©todo
ResetOffset() tamb√©m est√° dispon√≠vel e deve ser chamado
sempre que se desejar compensar a rota√ß√£o do BSN.
A fim de sanar a diferen√ßa de orienta√ß√£o entre o dispositivo
e o ambiente virtual, a classe RotatableObject possui duas
funcionalidades: a troca de um eixo com outro e a invers√£o

do sentido de um eixo. Ambas funcionalidades s√£o √∫teis para

2 *Application Programming Interface*
3 Sinal do transmissor BLE do BSN.
4 O Unity √© uma plataforma de desenvolvimento em tempo real, l√≠der
no mercado mundial, que permite a cria√ß√£o de jogos e simula√ß√µes
2D e 3D para diversas plataformas (PC, consoles, mobile, VR e AR),
utilizando um editor visual e programa√ß√£o atrav√©s de scripting, oferecendo ferramentas profissionais capazes de atender aos requisitos de
qualquer jogo.
5 Envio de dados de um dispositivo BLE.


corrigir a orienta√ß√£o do eixo dependendo da posi√ß√£o em que
o BSN √© anexado ao corpo do usu√°rio.
Surge uma outra quest√£o quando queremos que a posi√ß√£o
inicial do BSN seja diferente da posi√ß√£o padr√£o ‚Äì *T-pose* [6] .
Sempre que inicializado, o BSN precisa ser mantido em repouso na horizontal por aproximadamente 30 segundos antes
de come√ßar a utiliz√°-lo, a fim de calibrar os sensores. No caso
em que o objeto controlado √© a perna de um avatar, o BSN
√© anexado verticalmente na coxa do usu√°rio, gerando uma
rota√ß√£o imprevis√≠vel na coxa quando a rota√ß√£o deveria ser
zero. Tendo isso em vista, √© necess√°rio a aplica√ß√£o de um
*offset* sobre a rota√ß√£o do BSN, de tal modo que:

*ùëÑ* *ùëúùëèùëóùëíùë°ùëú* = *ùëÑ* *ùëúùëìùëìùë†ùëíùë°* ** ùëÑ* *ùêµùëÜùëÅ* *.* (1)

O *ùëÑ* *ùëúùëìùëìùë†ùëíùë°* deve ser calculado sempre que se deseja compensar a rota√ß√£o, ou seja, definir a rota√ß√£o atual como rota√ß√£o
zero. O c√°lculo √© dado a partir da Equa√ß√£o 1, multiplicando o
Inverso da *ùëÑ* *ùëüùëúùë°ùëé* √ß√£ *ùëúùëëùëúùêµùëÜùëÅ* em ambos os lados da equa√ß√£o.

*‚àí* 1 *‚àí* 1
*ùëÑ* *ùëúùëèùëóùëíùë°ùëú* ** ùëÑ* *ùêµùëÜùëÅ* = *ùëÑ* *ùëúùëìùëìùë†ùëíùë°* ** ùëÑ* *ùêµùëÜùëÅ* ** ùëÑ* *ùêµùëÜùëÅ* (2)

*‚àí* 1
*ùëÑ* *ùëúùëìùëìùë†ùëíùë°* = *ùëÑ* *ùëúùëèùëóùëíùë°ùëú* ** ùëÑ* *ùêµùëÜùëÅ* (3)
Ao ser adicionada a um *GameObject* no Unity, a classe
RotatableObject oferece campos de configura√ß√£o no *Inspec-*
*tor* . Outros dois campos s√£o criados. O campo *Simplified*
*Name* √© um apelido que √© dado ao objeto que √© mostrado
na interface de configura√ß√£o; j√° o campo *Precision Points*
delimita o n√∫mero de casas decimais que s√£o utilizadas na
rota√ß√£o. Seu valor padr√£o √© dois, obtido ap√≥s testes emp√≠ricos
onde foi poss√≠vel observar que mais de duas casas decimais √©
majoritariamente ru√≠do.
### 2.2 Vis√£o

O m√≥dulo Vis√£o √© composto por uma interface criada no
Unity com aux√≠lio do *asset* de √≠cones e anima√ß√µes *Modern*
*UI Pack* [ 11 ]. Este m√≥dulo possui duas classes: UIController,
uma classe que gerencia a interface; e NetConfigurationServer,
que realiza a comunica√ß√£o de rede.
Como a proposta foi criar um *asset* de integra√ß√£o em
que fosse poss√≠vel funcionar em novos projetos e tamb√©m
projetos legados, a interface foi projetada para ser o menos
invasiva poss√≠vel. A interface possui um bot√£o cuja fun√ß√£o √©
ativar e desativar a interface de configura√ß√£o, que se encontra
inicialmente desativada (Figura 1a).
A tela de configura√ß√£o √© composta por um bot√£o de iniciar
busca, um painel onde s√£o listados os BSNs encontrados e
o bot√£o que compensa (atribui o *offset* ) a rota√ß√£o de todos
os BSNs. O bot√£o de busca permanece desabilitado at√© que
se encontre um servidor de configura√ß√£o (apresentado da
Se√ß√£o 2.3). Ap√≥s iniciada a busca, cada BSN encontrado √©
adicionado no painel. O item que representa o BSN encontrado conta com o nome e o endere√ßo MAC do dispositivo,
como tamb√©m um menu suspenso para escolha de qual objeto
deseja-se controlar e um bot√£o de conex√£o.

6 Na anima√ß√£o por computador, a T-pose √© uma pose padr√£o para o
esqueleto de um modelo 3D antes de ser animado.


294


-----

WebMedia‚Äô2024, Juiz de Fora, Brazil Ribeiro et al.

toda intera√ß√£o √© disparada pelo usu√°rio final por meio da
interface (passos 5, 6 e 7).
### 2.3 Controle


(a) Menu de configura√ß√£o desativado.


(b) Buscando um servidor na
rede.


O Controle √© a camada respons√°vel por receber comandos
e aplic√°-los ao Modelo, como tamb√©m retornar √† Vis√£o o
estado atual do Modelo. √â composto por uma Interface de
Programa√ß√£o de Aplica√ß√£o (API) de configura√ß√£o que disp√µe
de m√©todos necess√°rios para uma sess√£o de uso do *asset* .
Em conjunto com a ConfigurationAPI, a classe NetConfigurationServer atua como uma classe que aguarda comandos da
rede, permitindo a configura√ß√£o remota dos BSNs, escutando
sob um *socket* UDP gerenciado pela biblioteca *Ruffles* [ 12 ].
Inicialmente, a ConfigurationAPI aguarda por *broadcasts* na
rede na porta 5556, contendo um *token* . Se este *token* recebido
pelo *broadcast* for o esperado, este √© enviado para o dispositivo de origem e imediatamente aguarda pela requisi√ß√£o de

conex√£o.
Ap√≥s conectado, a ConfigurationAPI aguarda por mensagens do cliente, respeitando o protocolo apresentado na
Tabela 1. Os dados s√£o separados do comando usando o



|bela 1. Os dados s√£o separad actere "/" como separador. Mensagem|Col2|dos do comando usando Dado Recebido|
|---|---|---|
|Mensagem||Dado Recebido|
|Servidor|Broadcast|Token de identifi- ca√ß√£o da aplica√ß√£o|
||Connection|-|
||StartDiscovering|-|
||Connect|Endere√ßo MAC|
||GetObjNames|-|
||SetObj|Endere√ßo MAC e nome do objeto|
|Cliente|AllBsn|JSON contendo um resumo de todos os BSNs conectados|
||ObjNames|Lista dos nomes dos RotatableObjects dispon√≠veis|


(c) Interface pronta para busca. (d) Interface com a busca iniciada. Na imagem h√° os tr√™s
estados do BSN: Desconectado,

Conectando e Conectado.

Figure 1: Telas da interface do BSNAsset

A classe UIController gerencia a entrada do usu√°rio e projeta na interface de usu√°rio as informa√ß√µes recebidas pelo
Controller. Ela trabalha em conjunto com a NetConfigurationClient, que se comunica em rede com a NetConfigurationServer. Inicialmente, a NetConfigurationServer envia
mensagens de *broadcast* na rede com o *token* da aplica√ß√£o em
busca de um servidor, que ap√≥s receber √© enviada uma requisi√ß√£o de conex√£o (passos 2 e 3 do diagrama de sequ√™ncia).
Em seguida o cliente solicita a lista de RotatableObjects e os
armazena em uma lista (passo 4). A partir desse momento


Table 1: Mensagens que o servidor e cliente de configura√ß√£o
aguardam
### 3 RESULTADOS

Os resultados deste trabalho consistem em implanta√ß√µes
diretas do BsnAsset como alternativa de intera√ß√£o em projetos de RV, como o Mazze e o Simulador de P√™nalti, duas
aplica√ß√µes que permitem demonstrar o funcionamento da
solu√ß√£o tanto para membros superiores, quanto para membros inferiores. √â apresentada tamb√©m uma solu√ß√£o quer
permite a cria√ß√£o e grava√ß√£o de sess√µes (no contexto de
neuroreabilita√ß√£o/fisioterapia).
### 3.1 Mazze

O *Mazze* √© um jogo composto de um labirinto gerado aleatoriamente (obtido em [ 16 ]), dentro do qual s√£o posicionadas


295


-----

Um framework de rastreamento corporal para reabilita√ß√£o neuromotora com suporte a aplicativos multim√≠dia WebMedia‚Äô2024, Juiz de Fora, Brazil

moedas douradas e uma esfera (Figura 2). O objetivo do
jogo √© coletar todas as moedas no menor tempo poss√≠vel,
deslocando a esfera pelo labirinto.
Durante o jogo, o usu√°rio rotaciona o BSN para controlar o
labirinto, que tamb√©m √© rotacionado, reproduzindo de forma
fidedigna o movimento realizado pelo usu√°rio, movendo a
esfera pelos corredores. O BSN deve ser posicionado horizontalmente, podendo estar situado no dorso ou palma da m√£o.
Como √© utilizada apenas a rota√ß√£o do dispositivo (√¢ngulos
de Euler), o *BSNAsset* foi utilizado apenas da forma *plug-*
*and-play*, pois apenas necessita indicar que o labirinto deve
ser controlado pelo dispositivo.

Figure 3: Cen√°rio do Simulador de P√™nalti

se aproxima da bola. Entretanto, como as anima√ß√µes foram
criadas de forma determin√≠stica, os pontos que o goleiro
consegue defender s√£o limitados. Desta maneira, o profissional
da sa√∫de pode usar o simulador para execu√ß√£o de exerc√≠cios
referentes √†s pernas de forma l√∫dica.
### 3.3 Recorder e Recorder Controller


Figure 2: Estado inicial do jogo *Mazze*

O Mazze pode ser utilizado em processos de reabilita√ß√£o
motora das m√£os. Assim, o paciente estar√° se exercitando √†
medida que joga
### 3.2 Simulador de P√™nalti

O Simulador de P√™nalti possibilitou o uso de todos os
recursos disponibilizados pelo *BSNAsset* . Nesta aplica√ß√£o,
s√£o utilizados os dados brutos do BSN, dispon√≠veis via API
do *asset* . O jogo consiste em um campo de futebol virtual
com um goleiro e o usu√°rio, como pode ser observado na
Figura 3.
Durante a simula√ß√£o o usu√°rio controla a perna e canela do
avatar com um par de BSNs colocados na parte anterior da
coxa (por√ß√£o medial) e perna (por√ß√£o distal), respectivamente.
A movimenta√ß√£o dos membros √© feita utilizando o modo *plug-*
*and-play* do *asset*, que apenas indica no *Unity* que estes
objetos devem ser controlados pelo BSN. Por sua vez, a for√ßa
do chute √© obtida a partir da API do *asset*, que fornece os
dados do aceler√¥metro do dispositivo.
No momento em que o p√© do avatar entra em contato
com a bola, a for√ßa do chute √© calculada multiplicando a
acelera√ß√£o obtida do aceler√¥metro do BSN por um valor
pr√©-definido (representando a massa). Em seguida, a for√ßa √©
aplicada na bola como um impulso na mesma dire√ß√£o e em
sentido contr√°rio √† normal da colis√£o.

A defesa do goleiro √© feita calculando-se a posi√ß√£o em que a
bola chegar√° no gol usando equa√ß√µes de movimento bal√≠stico.
Em seguida, √© disparada a anima√ß√£o em que o goleiro mais


O ReBase [ 17 ] foi criado para ser uma base de dados n√£orelacional utilizada para armazenar sess√µes de reabilita√ß√£o
neuromotora contendo informa√ß√µes da sess√£o e os movimentos executados pelo paciente durante o exerc√≠cio. Em [ 17 ] √©
apresentado uma estrutura de armazenamento como tamb√©m
√© fornecido uma API para grava√ß√£o e recupera√ß√£o desses
dados.

Visando consumir essa API de grava√ß√£o utilizando dados
de rota√ß√£o de um avatar em 3D, foram criados dois *assets*,
sendo eles: Recorder, e Recorder Controller. Os *assets* s√£o
distribuidos em forma de pacotes que podem ser utilizados
de forma desacoplada em diferentes dispositivos, desde que
estejam sob a mesma rede LAN, ou no mesmo dispositivo,
como apresentado em 3.4.
A vantagem de se utilizar o Recorder Controller em um
dispositivo separado √© permitir que aplica√ß√µes em RV sejam
utilizadas pelo paciente atrav√©s do uso de √ìculos VR, uma
vez que o controle de grava√ß√£o √© feito remotamente.

*3.3.1* *Recorder.* O Recorder √© uma ferramenta criada para
reconhecer, interpolar e salvar os dados de rota√ß√£o de um
avatar 3D, podendo ser utilizada independente do m√©todo
de rastreamento corporal, desde que o avatar onde a movimenta√ß√£o for aplicada esteja dentro do padr√£o definido pelo
Recorder.
O fluxo de execu√ß√£o do Recorder inicia quando o comando
de iniciar a grava√ß√£o da sess√£o de movimentos √© recebido pelo
m√≥dulo de comunica√ß√£o em rede. Em seguida os dados s√£o
armazenados com um *sample rate* igual √† taxa de quadros
(ou Frames per second (FPS)) atual da aplica√ß√£o.
Uma vez que o ReBase n√£o oferece possibilidade de gravar
o timestamp juntamente com a amostra, √© necess√°rio fixar um


296


-----

WebMedia‚Äô2024, Juiz de Fora, Brazil Ribeiro et al.


*sample rate* fixo, de modo que a recupera√ß√£o dos dados gravados mantenha a velocidade real do movimento. Al√©m disso,
sabemos que o FPS de uma aplica√ß√£o depende diretamente
do hardware que ela est√° sendo executada, impossibilitando
o uso desses dados n√£o confi√°veis.
Sendo assim, ao fim da grava√ß√£o de um movimento, as
amostras devem passar por um processo chamado de *resam-*
*pling* . Esse processo garante que independente do tamanho
do array de entrada, a sa√≠da ter√° o tamanho especificado,
sendo necess√°rio utilizar interpola√ß√£o linear para garantir
semelhan√ßa entre o array de entrada e o de sa√≠da.
### 3.4 Mobility Tests

Em sua disserta√ß√£o, Otoboni [13] realizou uma an√°lise
comparativa entre o sistema de rastreamento corporal √≥tico
VICON e a solu√ß√£o utilizando BSN. Seus testes se basearam
na execu√ß√£o da tarefa *Sit-to-Stand* que consiste em um exerc√≠cio onde o paciente levanta e senta em uma cadeira sem apoio
das m√£os. Para esse comparativo, obteve-se os √¢ngulos goniom√©tricos do Quadril (√¢ngulo formado no eixo l√°tero-lateral
pelo abd√¥men e coxa) e do Joelho (√¢ngulo formado no eixo
l√°tero-lateral pela coxa e perna) obtidos por um conjunto
de 3 BSNs posicionadas no abd√¥men, coxa e perna (plano
frontal) juntamente com as respectivas rota√ß√µes obtidas pelo
VICON.

Sendo assim, surgiu-se a demanda de uma aplica√ß√£o para
captura desses dados com os seguintes requisitos:

*‚àô* Aplica√ß√£o simples, sem RV;
*‚àô* possibilidade de conex√£o de 3 BSNs simultaneamente;

e

*‚àô* dados devem ser gravados em um arquivo no formato
CSV (comma-separated Values) contendo as informa√ß√µes
de rota√ß√£o brutas (Aceler√¥metro e Girosc√≥pio) e os valores dos √¢ngulos goniom√©tricos do quadril e do joelho.

Buscando atender aos requisitos da demanda, foi criado
o aplicativo BSN Mobility Tests, utilizando todos os assets
criados anteriormente: BSNAsset, Recorder, Recorder Controller, todos funcionando em um √∫nico aparelho, uma vez
que n√£o temos necessidade do paciente interagir com a aplica√ß√£o. Al√©m dos assets citados, um gravador de arquivos
CSV foi criado de modo que exportasse os dados da sess√£o
simultaneamente com a grava√ß√£o no ReBase.
Finalmente, Otoboni [13] apresenta uma correla√ß√£o regular/forte entre as rota√ß√µes em ambas as solu√ß√µes, reafirmando
a validade do uso de BSNs na √°rea da sa√∫de.
### 3.5 Body Tracking

A partir da demanda do BSN Mobility Tests surgiu a
necessidade da cria√ß√£o de uma aplica√ß√£o que pudesse realizar o rastreamento corporal completo utilizando BSNs.
Proporcionando grava√ß√£o de dados de aceler√¥metro, girosc√≥pio e rota√ß√£o 3D, al√©m de possibilitar a grava√ß√£o de dados
de rota√ß√£o de cada articula√ß√£o do corpo humano (√¢ngulos
goniom√©tricos).
A aplica√ß√£o permite o usu√°rio utilizar livremente as articula√ß√µes do corpo humano, limitando o uso a grupos de


articula√ß√µes: superior direito ‚Äì bra√ßo direito, antebra√ßo direito; superior esquerdo ‚Äì bra√ßo esquerdo, antebra√ßo esquerdo;
inferior direito ‚Äì coxa direita, perna direita; e inferior esquerdo ‚Äì coxa esquerda, perna esquerda.
Os BSNs devem ser posicionadas no corpo humano de
acordo com a Figura 4. Nos bra√ßos, os BSNs devem ser
posicionados com o led voltado para cima e com a face do
dispositivo voltada para fora do corpo. Nas pernas, as BSNs
devem ser posicionadas com o led voltado para cima e com a
face do dispositivo voltada para frente do corpo.


(a) Posicionamento das

BSNs nos

bra√ßos.


(b) Posicionamento das

BSNs nas

pernas.


Figure 4: Posicionamento das BSNs no corpo humano.

*3.5.1* *Gr√°ficos.* A seguir, apresentaremos os gr√°ficos gerados a partir dos dados coletados pelo BSN Body Tracking.
Os gr√°ficos foram gerados utilizando o software Excel, e os
dados utilizados foram coletados de um usu√°rio realizando
movimentos de flex√£o e extens√£o dos membros superiores e
inferiores.

*3.5.2* *Rosca direta.* A rosca direta √© um exerc√≠cio de muscu
la√ß√£o que trabalha os m√∫sculos do b√≠ceps braquial. O movimento consiste em flexionar o cotovelo, aproximando a m√£o
do ombro. O movimento √© realizado com os bra√ßos estendidos
ao lado do corpo, com os cotovelos flexionados e os punhos
em supina√ß√£o.
A coleta de dados foi realizada com o usu√°rio realizando

um total de 10 repeti√ß√µes do exerc√≠cio com o bra√ßo direito
(Figura 5a) e 10 repeti√ß√µes do exerc√≠cio com o bra√ßo esquerdo
(Figura 5b).
Nos gr√°ficos da Figura 5 √© poss√≠vel observar que os √¢ngulos goniom√©tricos do cotovelo diminui conforme o usu√°rio
realiza a flex√£o do cotovelo, e aumenta conforme o usu√°rio
realiza a extens√£o do cotovelo, variando entre 180¬∫ e 90¬∫,
aproximadamente.
Os gr√°ficos da Figura 6 representam os dados de aceler√¥metro coletados durante a execu√ß√£o do exerc√≠cio. √â poss√≠vel observar que os dados de aceler√¥metro do bra√ßo direito
e do bra√ßo esquerdo s√£o semelhantes, assim como os dados de


297


-----

Um framework de rastreamento corporal para reabilita√ß√£o neuromotora com suporte a aplicativos multim√≠dia WebMedia‚Äô2024, Juiz de Fora, Brazil


(a) Rosca direta com o bra√ßo direito.

(b) Rosca direta com o bra√ßo esquerdo.

Figure 5: Gr√°ficos goniom√©tricos da rosca direta.

aceler√¥metro do antebra√ßo direito e do antebra√ßo esquerdo.
Os aceler√¥metros de ambos antebra√ßos apresentam valores
mais altos que os aceler√¥metros dos bra√ßos, pois os antebra√ßos
executaram um movimento de rota√ß√£o durante a execu√ß√£o
do exerc√≠cio, enquanto os bra√ßos permaneceram est√°ticos.

*3.5.3* *Marcha estacion√°ria.* A marcha estacion√°ria √© um exer
c√≠cio que consiste em simular a marcha sem sair do lugar. O
movimento √© realizado suspendendo o joelho at√© que fique
alinhado com o quadril, e em seguida voltando a posi√ß√£o
inicial.

A coleta de dados foi realizada com o usu√°rio realizando

um total de 10 repeti√ß√µes do exerc√≠cio com a perna direita
7a e 10 repeti√ß√µes do exerc√≠cio com a perna esquerda 7b.
Nos gr√°ficos da Figura 7 √© poss√≠vel observar que os √¢ngulos
goniom√©tricos do joelho e do quadril diminuem conforme
o usu√°rio realiza a flex√£o do joelho, e aumenta conforme o
usu√°rio realiza a extens√£o do joelho, variando entre 180¬∫ e
90¬∫, aproximadamente.
Os gr√°ficos da Figura 8 representam os dados de aceler√¥metro coletados durante a execu√ß√£o do exerc√≠cio. √â poss√≠vel observar que os dados de aceler√¥metro da perna direita
e da perna esquerda s√£o semelhantes, assim como os dados
de aceler√¥metro da canela direita e da canela esquerda. Os
aceler√¥metros de ambas as pernas fazem uma troca de eixo,
representando uma rota√ß√£o do dispositivo. Em contrapartida,
os aceler√¥metros das canelas n√£o apresentam rota√ß√£o, por√©m


(a) Aceler√¥metro do bra√ßo direito

(b) Aceler√¥metro do bra√ßo esquerdo

(c) Aceler√¥metro do antebra√ßo direito

(d) Aceler√¥metro do antebra√ßo esquerdo

Figure 6: Gr√°ficos de aceler√¥metro da rosca direta

apresentaram varia√ß√µes nos eixos Y e Z, causados pelo movimento de sobe e desce da canela.


298


-----

WebMedia‚Äô2024, Juiz de Fora, Brazil Ribeiro et al.


(a) Marcha estacion√°ria com a perna direita

(b) Marcha estacion√°ria com a perna esquerda

Figure 7: Gr√°ficos da marcha estacion√°ria
### 4 CONCLUS√ïES E TRABALHOS FUTUROS

Com o crescimento da RV presente nas casas e consult√≥rios
m√©dicos, ela se mostra um excelente incentivo para o exerc√≠cio
f√≠sico e ajuda na reabilita√ß√£o de pacientes com dificuldades
neuromotoras causadas por v√°rias patologias (como o acidente vascular cerebral). A inevitabilidade de criar in√∫meras
aplica√ß√µes para uso espec√≠fico se torna uma grande possibilidade. Entretanto, embora os √≥culos de RV facilitem e
tornem a imers√£o mais acess√≠vel, um m√©todo de intera√ß√£o
natural ainda √© visto como um desafio no desenvolvimento
de aplica√ß√µes de RV.
A necessidade de criar um m√©todo de intera√ß√£o natural
que seja suficientemente gen√©rico para funcionar em v√°rias
aplica√ß√µes de RV e que ofere√ßa espa√ßo para a inser√ß√£o de
particularidades de cada projeto tem governado este trabalho
e incentivado a cria√ß√£o do BSNAsset.
Propusemos e desenvolvemos um asset que nos permite
realizar a conex√£o de m√∫ltiplos dispositivos, rastrear o corpo
humano e mover um avatar virtual. A solu√ß√£o desenvolvida
√© f√°cil de importar e usar em qualquer projeto da Unity.
Como mostramos, √© poss√≠vel gerar aplica√ß√µes de rastreamento
corporal completo, interagindo com membros superiores e
inferiores.
### AGRADECIMENTOS

Os autores agradecem o financiamento em parte pela Coordena√ß√£o de Aperfei√ßoamento de Pessoal de N√≠vel Superior 

(a) Aceler√¥metro da perna direita

(b) Aceler√¥metro da perna esquerda

(c) Aceler√¥metro da canela direita

(d) Aceler√¥metro da canela esquerda

Figure 8: Gr√°ficos de aceler√¥metro da marcha estacion√°ria

Brasil (CAPES) - C√≥digo de Financiamento 001, Conselho
Nacional de Desenvolvimento Cient√≠fico e Tecnol√≥gico (CNPq)
e a Funda√ß√£o de Amparo √† Pesquisa do Estado de Minas


299


-----

Um framework de rastreamento corporal para reabilita√ß√£o neuromotora com suporte a aplicativos multim√≠dia WebMedia‚Äô2024, Juiz de Fora, Brazil


Gerais (FAPEMIG). Tamb√©m agradecemos √† Funda√ß√£o de
Amparo √† Pesquisa e Inova√ß√£o do Esp√≠rito Santo (FAPES) pelos recursos disponibilizados atrav√©s dos projetos PROAPEM
(368/2022 - P: 2022-NGKM5) e PDPG (129/2021 - P: 2021GL60J), fundamentais para a realiza√ß√£o deste trabalho.
### REFERENCES

[1] Alberto Luiz Aramaki, Rosana Ferreira Sampaio, Ana Caroline Silva Reis, Alessandra Cavalcanti, et al . 2019. Virtual reality
in the rehabilitation of patients with stroke: an integrative review.
*Arquivos de neuro-psiquiatria* 77 (2019), 268‚Äì278.

[2] Alexandre Fonseca Brand√£o, Diego Roberto Colombo
Dias, S√°vyo Toledo Machado Reis, Clovis Magri Cabreira,
Maria Cecilia Moraes Frade, Thomas Beltrame, Marcelo de
Paiva Guimar√£es, and Gabriela Castellano. 2020. Biomechanics
Sensor Node for Virtual Reality: A Wearable Device Applied
to Gait Recovery for Neurofunctional Rehabilitation. In *In-*
*ternational Conference on Computational Science and Its*
*Applications* . Springer, 757‚Äì770.

[3] Desiderio Cano Porras, Petra Siemonsma, Rivka Inzelberg,
Gabriel Zeilig, and Meir Plotnik. 2018. Advantages of virtual reality in the rehabilitation of balance and gait. *Neu-*
*rology* 90, 22 (2018), 1017‚Äì1025. https://doi.org/10.1212/
WNL.0000000000005603 Publisher: Wolters Kluwer Health, Inc.
on behalf of the American Academy of Neurology _eprint:
https://n.neurology.org/content/90/22/1017.full.pdf.

[4] Gisela Miranda Difini, Marcio Garcia Martins, and Jorge Luis Vict√≥ria Barbosa. 2021. Human pose estimation for training assistance: a systematic literature review. In *Proceedings of the*
*Brazilian Symposium on Multimedia and the Web* . 189‚Äì196.

[5] M P Guimaraes, V F Martins, G J C Brasil, and L C Trevelin.
2011. Um Modelo de Processo de Desenvolvimento de Interfaces de
Gesto: Defini√ß√£o e um Estudo de Caso. In *XXXVII Conferencia*
*Latinoamericana de Inform√°tica (CLEI)*, Vol. 1. 378‚Äì390.

[6] P C Hallal, A E Bauman, G W Heath, H W Kohl, I-Min Lee, and
M Pratt. 2012. Physical activity: more of the same is not enough.
*Lancet* 380 (2012), 189‚Äì190.

[7] J Kesselring. 2001. Neurorehabilitation: a bridge between basic
science and clinical practice. *European journal of neurology* 8, 3
(2001), 221‚Äì225.

[8] A E Maloney, K A Threlkeld, and W L Cook. 2012. Comparative effectiveness of a 12-week physical activity intervention for
overweight and obese youth: Exergaming with ‚ÄúDance Dance Revolution. *Games for health journal: Research, development and*
*clinical applications* (2012), 1‚Äì8.

[9] D C Malta and J B Silva. 2012. Policies to promote physical
activity in Brazil. *Lancet* 380 (2012), 195‚Äì196.

[10] Alfredo Manuli, Maria Grazia Maggio, Daniele Tripoli, Martina
Gull√¨, Antonino Cannav√≤, Gianluca La Rosa, Francesca Sciarrone,
Giuseppe Avena, and Rocco Salvatore Calabr√≤. 2020. Patients‚Äô
perspective and usability of innovation technology in a new rehabilitation pathway: An exploratory study in patients with multiple
sclerosis. *Multiple sclerosis and related disorders* 44 (2020),
102312.

[11] Michsky. 2021. Modern UI Pack. https://assetstore.unity.com/
packages/tools/gui/modern-ui-pack-150824

[12] MidLevel. 2021. Ruffles. https://github.com/MidLevel/Ruffles

[13] Gabriele Biscegli Otoboni. 2022. *Compara√ß√£o entre sensores*
*inerciais e sistema de an√°lise de movimento VI na avalia√ß√£o*
*da tarefa de Sit-to-Stand em adultos jovens saud√°veis* . Master‚Äôs
thesis. Escola de Engenharia de S√£o Carlos (EESC-USP).

[14] Alexandra Pfister, Alexandre M West, Shaw Bronner, and
Jack Adam Noah. 2014. Comparative abilities of Microsoft Kinect
and Vicon 3D motion capture for gait analysis. *Journal of medical*
*engineering & technology* 38, 5 (2014), 274‚Äì280.

[15] Luis GS Rodrigues, Diego RC Dias, Marcelo P Guimar√£es, Alexandre F Brand√£o, Leonardo CD Rocha, Rog√©rio L Iope, and Jos√© RF
Brega. 2021. Upper limb motion tracking and classification: A
smartphone approach. In *Proceedings of the Brazilian Symposium*
*on Multimedia and the Web* . 61‚Äì64.

[16] styanton. 2021. Maze Generator. https://assetstore.unity.com/
packages/tools/modeling/maze-generator-38689

[17] Tiago Trotta Lara Barbosa, Marcelo de Paiva Guimar√£es, Alexandre Fonseca Brand√£o, Leonardo Chaves Dutra da Rocha, Rogerio Luiz Iope, Jos√© Remo Ferreira Brega, and Diego Roberto


Colombo Dias. 2021. ReBase: Data Acquisition and Management System for Neuromotor Rehabilitation Supported by Virtual and Augmented Reality. In *Symposium on Virtual and*
*Augmented Reality* (Virtual Event, Brazil) *(SVR‚Äô21)* . Association for Computing Machinery, New York, NY, USA, 182‚Äì186.
https://doi.org/10.1145/3488162.3488225


300


-----

